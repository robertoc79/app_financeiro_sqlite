<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Financeiro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #121212;
            color: #f1f1f1;
        }
        .card {
            background-color: #1e1e1e;
            border: none;
            color: white;
        }
        table {
            color: white;
        }
        .btn-success { background-color: #28a745; border: none; }
        .btn-warning { background-color: #ffc107; border: none; }
        .btn-danger  { background-color: #dc3545; border: none; }
        .saldo { font-size: 1.3rem; }
    </style>
</head>
<body class="p-4">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2>Dashboard Financeiro</h2>
            <a href="{{ url_for('logout') }}" class="btn btn-danger">Sair</a>
        </div>

        <div class="card p-3 mb-4">
            <h4 class="saldo">ðŸ’° Saldo atual: R$ {{ "%.2f"|format(saldo) }}</h4>
        </div>

        <div class="card p-3 mb-4">
            <form method="POST" action="{{ url_for('add_transacao') }}" class="row g-2">
                <div class="col-md-3">
                    <input type="text" name="descricao" placeholder="DescriÃ§Ã£o" class="form-control" required>
                </div>
                <div class="col-md-2">
                    <input type="number" step="0.01" name="valor" placeholder="Valor" class="form-control" required>
                </div>
                <div class="col-md-2">
                    <select name="tipo" class="form-select" required>
                        <option value="entrada">Entrada</option>
                        <option value="saida">SaÃ­da</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <input type="date" name="data" class="form-control">
                </div>
                <div class="col-md-2 d-grid">
                    <button type="submit" class="btn btn-success">Adicionar</button>
                </div>
            </form>
        </div>

        <table class="table table-dark table-hover align-middle">
            <thead>
                <tr>
                    <th>DescriÃ§Ã£o</th>
                    <th>Valor (R$)</th>
                    <th>Tipo</th>
                    <th>Data</th>
                    <th>AÃ§Ãµes</th>
                </tr>
            </thead>
            <tbody>
                {% for t in transacoes %}
                <tr>
                    <td>{{ t['descricao'] }}</td>
                    <td>{{ "%.2f"|format(t['valor']) }}</td>
                    <td>{{ t['tipo'] }}</td>
                    <td>{{ t['data'] }}</td>
                    <td>
                        <a href="{{ url_for('editar', id=t['id']) }}" class="btn btn-warning btn-sm">Editar</a>
                        <a href="{{ url_for('excluir', id=t['id']) }}" class="btn btn-danger btn-sm"
                           onclick="return confirm('Tem certeza que deseja excluir esta transaÃ§Ã£o?')">Excluir</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>
